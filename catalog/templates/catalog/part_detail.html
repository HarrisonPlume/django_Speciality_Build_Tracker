{% extends "base_generic.html" %}

{% block content %}

<h1>{{part}} ({{part.team}})</h1>
{% if user.is_authenticated %}
<hr>
<h5>Admin Panel</h5>
<li><a href = "{% url 'part-update' part.pk %}">Update part</a></li>
<li><a href = "{% url 'part-delete' part.pk %}">Delete part</a></li>
<hr>
{% endif %}
<div style="margin-left:20px;margin-top:20px">
<h4>Current Component Prep Tasks</h4>
<hr>
{% for task in part_component_prep_tasks %}
{% if task.part == part %}
<li> <a href = "{% url 'cptask-detail' task.pk %}">{{task}}</a> 
      <span class ="{% if task.status == 'c' %}text-success {% elif task.status == 'h' %}text-warning {% elif task.status == 'p' %}text-info {% else %}text-body{% endif %}">- {{task.get_status_display}} </span> </li>
{% endif %}
{% endfor %}


<br>

{% if part in component_prep_tasks_not_completed %}
{# Tasks are currently incomplete at this point #}
</h5>
{% else %}
<h5 class = "text-success">
Compnent Prep Tasks Complete
</h5>
{% endif %}


<br>
<h4>Current Stacking Tasks</h4>
<hr>
{% for task in part_stacking_tasks %}
{% if task.part == part %}
<li> <a href = "{% url 'stackingtask-detail' task.pk %}">{{task}}</a> 
      <span class ="{% if task.status == 'c' %}text-success {% elif task.status == 'h' %}
      text-warning {% elif task.status == 'p' %}
      text-info {% else %}text-body{% endif %}">
      - {{task.get_status_display}} </span>
      {% if task.status != "c" %}
      {% if part in component_prep_tasks_not_completed %} 
      <span class = "text-danger">- Not Avaliable </span>
      {% else %}<span class = "text-success">- Avaliable </span>{% endif %}
      {% endif %}
       </li>
{% endif %}
{% endfor %}

<br>
{% if part in stacking_tasks_not_completed %}
{# #}
{% else %}
<h5 class = "text-success"> Stacking Tasks Complete </h5>
{% endif %}
</div>
{% endblock %}