{% extends "base_generic.html" %}
{% block content %}
{% load static %}
<head>
<style>
table, th, td {
  border-collapse: collapse;
  border: 2px solid rgb(230,230,230);
  letter-spacing: 1px;
  font-size: 0.8rem;
  padding-left: 5px;
  padding-right: 5px;
}
a.ex3 {color: black;
font-weight: bold;
}
a.ex2{color: black; text-align:center}


th span 
{
  -ms-writing-mode: tb-rl;
  -webkit-writing-mode: vertical-rl;
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  white-space: nowrap;
}
</style>
</head>
    <h1> Current Parts</h1>
    <hr>
    {% if user.is_authenticated %}
      <h5>Admin Panel</h5>
      <p><a class = "ex3" href = "{% url 'part-create' %}">Create new part</a></p>
      <hr>
      {% endif %}
      {% if part_list %}
      {% if Cores_not_in_Archive > 0 %}
        <table>
        <tr>
        <th><a href = "" class = "ex3">Part</a></th>
        <th><a href = "" class = "ex3">Team</a></th>
        <th><a href = "" class = "ex3">Serial</a></th>
        <th colspan={{ Component_Prep_Tasks|length }}><a href = "{% url 'cptasks' %}" class = "ex3">Component Prep Tasks</a></th>
        <th colspan={{ Forming_Tasks|length }}><a href = "{% url 'formingtasks' %}" class = "ex3">Forming Header Plate Tasks</a></th>
        <th colspan={{ Stacking_Tasks|length }}><a href = "{% url 'stackingtasks' %}" class = "ex3">Stacking Tasks</a></th>
        <th colspan={{ Wire_Cut_Tasks|length }}><a href = "{% url 'wirecuttasks' %}" class = "ex3">Wire Cut Tasks</a></th>
        <th colspan={{ Pitching_Tasks|length }}><a href = "{% url 'pitchingtasks' %}" class = "ex3">Pitching Tasks</a></th>
        <th colspan={{ HP_Tasks|length }}><a href = "{% url 'headerplatetasks' %}" class = "ex3">HP Machining Tasks</a></th>
        <th colspan={{ Deburr_Tasks|length }}><a href = "{% url 'deburrtasks' %}" class = "ex3">Deburr Tasks</a></th>
        <th colspan={{ Plating_Tasks|length }}><a href = "{% url 'platingtasks' %}" class = "ex3">Plating Tasks</a></th>
        </tr>
        {% for part in part_list %}
        {% if part.archive != True %}
        <tr>
        <td></td>
        <td></td>
        <td></td>
        {% for task in Component_Prep_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        {% for task in Forming_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        {% for task in Stacking_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        {% for task in Wire_Cut_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        {% for task in Pitching_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        {% for task in HP_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        {% for task in Deburr_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        {% for task in Plating_Tasks %}
        <th style = "text-align:center"><span>{{task}}</span></th> 
        {% endfor %}
        
        </tr>
        <tr>
        <td><a class = "ex2" href = "{{ part.get_absolute_url }}">{{part}}</a></td>
        <td>{{part.team}}  </td>
        <td>{{part.serial}}  </td>
            {# Component Prep Tasks with formating #}
            
        {% for task in part_component_prep_tasks %}
        {% for taskname in Component_Prep_Tasks %}
        {% if task.task == taskname.title %}
        <td style = "text-align:center"><a href = "{{ task.get_absolute_url }}"><img src="{% static 'catalog/RedButton.webp' %}" alt="Not Started"></a></td>
        {% endif %}
        {% endfor %}
        {% if taskname.title not in part_component_prep_tasks %}
        <td style = "text-align:center">-</td>
        {% endif %}
        {% endfor %}
        
        
       
        
        
        </tr>
        
        {% endif %}
        {% endfor %}
        </table>
        {% else %}
        <h5> There are no parts recorded in the system</h5>
        {% endif %}
        {% else %}
        <h5> There are no parts recorded in the system</h5>
        {% endif %}
{% endblock %}